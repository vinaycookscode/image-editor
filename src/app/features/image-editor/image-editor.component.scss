.editor-root{min-height:100vh;background:var(--bg-main);display:flex;flex-direction:column}
.editor-toolbar{display:flex;align-items:center;background:var(--toolbar-bg);border-radius:8px 8px 0 0;box-shadow:0 2px 8px rgba(0,0,0,.04);padding:0 32px;min-height:64px;margin:24px 24px 0 24px}
.toolbar-icons{display:flex;gap:8px}
.toolbar-icons div{display:flex}
.toolbar-icons button.mat-icon-button{color:var(--toolbar-icon);transition:color .2s,background .2s}
.toolbar-icons button.mat-icon-button mat-icon{color:var(--toolbar-icon);transition:color .2s}
.toolbar-icons button.mat-icon-button.active,.toolbar-icons button.mat-icon-button:hover{color:var(--toolbar-icon-active);background:rgba(37,99,235,.08)}
.toolbar-icons button.mat-icon-button.active mat-icon,.toolbar-icons button.mat-icon-button:hover mat-icon{color:var(--toolbar-icon-active)}
.toolbar-icons button.mat-icon-button:disabled{opacity:.5;cursor:not-allowed}
.toolbar-icons button.mat-icon-button:disabled mat-icon{color:var(--text-secondary)}
.toolbar-icons button.mat-icon-button:disabled:hover{background:transparent}
.upload-btn{color:var(--toolbar-icon-active);background:rgba(37,99,235,.08);border-radius:6px;margin-right:8px;box-shadow:0 1px 4px rgba(37,99,235,.08);transition:background .2s,color .2s}
.upload-btn mat-icon{color:var(--toolbar-icon-active)}
.upload-btn:hover{background:rgba(37,99,235,.12);color:var(--toolbar-icon-active)}
.upload-btn:hover mat-icon{color:var(--toolbar-icon-active)}
.toolbar-spacer{flex:1 1 auto}
.export-btn{background:#2563eb;color:#fff;border:none;border-radius:6px;font-weight:600;font-size:16px;padding:10px 28px;box-shadow:0 2px 8px rgba(37,99,235,.08);cursor:pointer;transition:background .2s}
.export-btn:hover{background:#1d4ed8}
.editor-content{display:flex;flex:1;margin:0 24px 24px 24px;gap:32px}
.editor-center{flex:1 1 auto;display:flex;flex-direction:column;align-items:center;justify-content:center}
.canvas-container-outer{display:flex;flex-direction:column;align-items:center;justify-content:center;background:var(--bg-panel);border-radius:8px;box-shadow:var(--shadow-main);padding:40px 40px 80px 40px;position:relative;min-width:600px;min-height:400px;max-width:100vw;max-height:80vh;overflow:auto}
.canvas-container{position:relative;display:flex;align-items:center;justify-content:center;background:var(--bg-panel);border-radius:6px;box-shadow:0 2px 8px rgba(0,0,0,.04);min-width:320px;min-height:200px;max-width:90vw;max-height:60vh;overflow:auto}
.editor-canvas{border-radius:4px;background:var(--bg-panel);box-shadow:none;max-width:100%;max-height:60vh;width:100%;height:auto;display:block}
.crop-rect-overlay{position:absolute;border:1.5px solid var(--crop-border);border-radius:6px;background:transparent;z-index:3;pointer-events:none}
.crop-handle{width:14px;height:14px;background:var(--handle-bg);border:1.5px solid var(--handle-border);border-radius:50%;position:absolute;z-index:4;box-shadow:var(--handle-shadow);pointer-events:auto;transition:box-shadow .15s,border-color .15s}
.crop-handle:hover{box-shadow:0 2px 8px rgba(37,99,235,.18);border-color:#2563eb}
.editor-sidebar{width:260px;background:var(--sidebar-bg);box-shadow:var(--shadow-main);padding:32px 24px;display:flex;flex-direction:column;align-items:flex-start;min-width:180px;max-width:100vw;box-sizing:border-box;border:none}
.sidebar-title{font-size:1.4rem;font-weight:700;margin-bottom:32px;color:var(--sidebar-title)}
.sidebar-tools{display:flex;flex-direction:column;gap:16px;width:100%}
.sidebar-tool{display:flex;align-items:center;gap:16px;font-size:1.1rem;color:var(--text-main);background:none;border:none;border-radius:6px;padding:10px 12px;cursor:pointer;transition:background .15s;width:100%;text-align:left;min-height:44px}
.sidebar-tool:hover, .sidebar-tool.active{background:var(--sidebar-hover)}
.tool-panel{position:absolute;top:80px;right:16px;background-color:var(--bg-panel);border:1px solid var(--border-main);border-radius:4px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,.1);z-index:5;min-width:220px;max-width:90vw}
.text-tool-panel,.shape-tool-panel{display:flex;flex-direction:column;gap:8px}
.text-tool-panel input{padding:8px;border:1px solid var(--border-main);border-radius:4px;font-size:1rem;background:var(--bg-panel);color:var(--text-main)}
.add-text-btn{display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;background:linear-gradient(135deg,#1976d2,#1565c0);color:white;border:2px solid #1976d2;border-radius:6px;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s ease;box-shadow:0 2px 4px rgba(25,118,210,.3);min-height:44px}
.add-text-btn:hover:not(:disabled){background:linear-gradient(135deg,#1565c0,#0d47a1);border-color:#1565c0;box-shadow:0 4px 8px rgba(25,118,210,.4);transform:translateY(-1px)}
.add-text-btn:active:not(:disabled){transform:translateY(0);box-shadow:0 2px 4px rgba(25,118,210,.3)}
.add-text-btn:disabled{background:#ccc;border-color:#ccc;color:#666;cursor:not-allowed;box-shadow:none}
.draggable-overlay{position:absolute;cursor:move;user-select:none;z-index:10;background:var(--bg-panel);border:1.5px solid var(--toolbar-icon-active);border-radius:4px;padding:4px;min-width:50px;min-height:30px;display:flex;align-items:center;justify-content:center;font-size:1rem;max-width:90vw;box-sizing:border-box;box-shadow:none;color:var(--text-main)}
.draggable-overlay:hover{border-color:var(--toolbar-icon-active);background:var(--bg-panel);opacity:.95}
.confirm-btn{position:absolute;top:-8px;right:-8px;width:24px;height:24px;min-width:24px;padding:0;border-radius:50%;background:#4caf50;color:white;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;box-shadow:0 2px 4px rgba(0,0,0,.2)}
.confirm-btn:hover{background:#45a049;transform:scale(1.1)}
.mode-toggle-btn{position:fixed;top:24px;right:32px;z-index:100;background:var(--toolbar-bg)!important;color:var(--toolbar-icon)!important;box-shadow:0 2px 8px rgba(0,0,0,.1);border-radius:50%;width:48px;height:48px;min-width:48px;min-height:48px;display:flex;align-items:center;justify-content:center;transition:background .2s,color .2s}
.mode-toggle-btn:hover{background:var(--button-hover)!important;color:var(--toolbar-icon-active)!important}
@media (max-width:1200px){.editor-content{flex-direction:column;gap:16px}.editor-sidebar{width:100%;min-width:0;border-radius:8px;margin-top:24px;max-width:100vw}.canvas-container-outer{min-width:0;padding:16px;max-width:100vw}}
@media (max-width:900px){.editor-toolbar{flex-wrap:wrap;padding:8px;min-height:56px;margin:12px 8px 0 8px}.editor-content{flex-direction:column;gap:12px;margin:0 8px 8px 8px}.editor-sidebar{width:100%;min-width:0;border-radius:8px;margin-top:16px;padding:20px 8px}.canvas-container-outer{min-width:0;padding:8px;max-width:100vw}.canvas-container{min-width:180px;min-height:120px;max-width:100vw;max-height:40vh;border-radius:6px}.editor-canvas{max-width:100vw;max-height:40vh;border-radius:4px}.tool-panel{min-width:120px;max-width:98vw;right:4px;top:60px}}
@media (max-width:600px){.editor-toolbar{flex-wrap:wrap;padding:4px;min-height:44px;margin:4px 0 0 0;border-radius:0}.editor-content{flex-direction:column;gap:6px;margin:0 0 4px 0}.editor-sidebar{width:100%;min-width:0;border-radius:0;margin-top:4px;padding:10px 2px}.canvas-container-outer{min-width:0;padding:2px;max-width:100vw;border-radius:0}.canvas-container{min-width:80px;min-height:60px;max-width:100vw;max-height:30vh;border-radius:0}.editor-canvas{max-width:100vw;max-height:30vh;border-radius:0}.tool-panel{min-width:80px;max-width:99vw;right:2px;top:44px;border-radius:0;padding:8px 2px}.sidebar-tool{font-size:.95rem;min-height:36px;padding:6px 4px;border-radius:4px}.add-text-btn{font-size:12px;min-height:36px;padding:8px 8px;border-radius:4px}}
 